<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register - ZenTrade</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        primary: "#00F5D4",
                        secondary: "#7B2CBF",
                        "background-light": "#f6f7f8",
                        "background-dark": "#0a0a0a",
                        "surface-dark": "#1a1a1a",
                        "surface-light": "#ffffff",
                        "text-primary": "#ffffff",
                        "text-secondary": "#a0a0a0",
                        "text-dark": "#1a1a1a",
                        "border-dark": "#333333",
                        "border-light": "#e5e5e5",
                        "success": "#10b981",
                        "error": "#ef4444",
                        "warning": "#f59e0b"
                    },
                    fontFamily: {
                        display: ["Space Grotesk", "Inter", "system-ui", "sans-serif"],
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'glow': 'glow 2s ease-in-out infinite alternate',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0px)' },
                            '50%': { transform: 'translateY(-20px)' }
                        },
                        glow: {
                            '0%': { boxShadow: '0 0 20px rgba(0, 245, 212, 0.3)' },
                            '100%': { boxShadow: '0 0 30px rgba(0, 245, 212, 0.6)' }
                        }
                    }
                }
            }
        }
    </script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 50%, #0a0a0a 100%);
        }
        .glass-effect {
            background: rgba(26, 26, 26, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .glow-border {
            position: relative;
        }
        .glow-border::before {
            content: '';
            position: absolute;
            inset: 0;
            padding: 1px;
            background: linear-gradient(45deg, #00F5D4, #7B2CBF, #00F5D4);
            border-radius: inherit;
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask-composite: exclude;
            opacity: 0.6;
            pointer-events: none;
        }
    </style>
</head>
<body class="gradient-bg min-h-screen flex items-center justify-center p-4">
    <!-- Background Elements -->
    <div class="absolute inset-0 overflow-hidden">
        <div class="absolute top-20 left-20 w-72 h-72 bg-primary/10 rounded-full blur-3xl animate-float"></div>
        <div class="absolute bottom-20 right-20 w-96 h-96 bg-secondary/10 rounded-full blur-3xl animate-float" style="animation-delay: -3s;"></div>
        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-primary/5 rounded-full blur-2xl animate-glow"></div>
    </div>

    <div class="relative z-10 w-full max-w-md">
        <!-- Logo and Header -->
        <div class="text-center mb-8">
            <div class="inline-flex items-center justify-center w-16 h-16 mb-4">
                <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" class="w-full h-full">
                    <defs>
                        <linearGradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#00F5D4;stop-opacity:1" />
                            <stop offset="50%" style="stop-color:#00D4FF;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#7B2CBF;stop-opacity:1" />
                        </linearGradient>
                        <linearGradient id="pulseGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#00F5D4;stop-opacity:0.8" />
                            <stop offset="50%" style="stop-color:#00D4FF;stop-opacity:0.6" />
                            <stop offset="100%" style="stop-color:#7B2CBF;stop-opacity:0.8" />
                        </linearGradient>
                        <filter id="glow">
                            <feGaussianBlur stdDeviation="4" result="coloredBlur"/>
                            <feMerge> 
                                <feMergeNode in="coloredBlur"/>
                                <feMergeNode in="SourceGraphic"/>
                            </feMerge>
                        </filter>
                    </defs>
                    
                    <!-- Animated inner ring -->
                    <circle cx="50" cy="50" r="40" 
                            stroke="url(#pulseGradient)" 
                            stroke-width="3" 
                            fill="none" 
                            opacity="0.7">
                        <animateTransform attributeName="transform" 
                                        type="rotate" 
                                        values="360 50 50;0 50 50" 
                                        dur="6s" 
                                        repeatCount="indefinite"/>
                    </circle>
                    
                    <!-- Central hexagon -->
                    <polygon points="50,25 70,40 70,60 50,75 30,60 30,40" 
                             stroke="url(#logoGradient)" 
                             stroke-width="4" 
                             fill="none" 
                             filter="url(#glow)">
                        <animate attributeName="opacity" 
                                 values="0.7;1;0.7" 
                                 dur="2s" 
                                 repeatCount="indefinite"/>
                    </polygon>
                    
                    <!-- Animated data points -->
                    <circle cx="25" cy="45" r="4" fill="#00F5D4" opacity="0.9">
                        <animate attributeName="r" values="3;6;3" dur="1.5s" repeatCount="indefinite"/>
                        <animate attributeName="opacity" values="0.6;1;0.6" dur="1.5s" repeatCount="indefinite"/>
                    </circle>
                    <circle cx="50" cy="30" r="4" fill="#00D4FF" opacity="0.9">
                        <animate attributeName="r" values="3;6;3" dur="1.8s" repeatCount="indefinite" begin="0.3s"/>
                        <animate attributeName="opacity" values="0.6;1;0.6" dur="1.8s" repeatCount="indefinite" begin="0.3s"/>
                    </circle>
                    <circle cx="75" cy="45" r="4" fill="#7B2CBF" opacity="0.9">
                        <animate attributeName="r" values="3;6;3" dur="2s" repeatCount="indefinite" begin="0.6s"/>
                        <animate attributeName="opacity" values="0.6;1;0.6" dur="2s" repeatCount="indefinite" begin="0.6s"/>
                    </circle>
                    
                    <!-- Animated connection lines -->
                    <path d="M25,45 L50,30 L75,45" 
                          stroke="url(#logoGradient)" 
                          stroke-width="2.5" 
                          fill="none" 
                          opacity="0.7">
                        <animate attributeName="opacity" values="0.4;0.9;0.4" dur="3s" repeatCount="indefinite"/>
                    </path>
                </svg>
            </div>
            <h1 class="text-3xl font-bold text-text-primary mb-2">Join ZenTrade</h1>
            <p class="text-text-secondary">Start your trading journey with professional tools</p>
        </div>

        <!-- Register Form -->
        <div class="glass-effect rounded-2xl p-8 glow-border">
            <form id="registerForm" class="space-y-6">
                <!-- First Name & Last Name -->
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label for="firstName" class="block text-sm font-medium text-text-primary mb-2">First Name</label>
                        <input 
                            type="text" 
                            id="firstName" 
                            name="firstName"
                            required
                            class="w-full px-4 py-3 bg-surface-dark border border-border-dark rounded-xl text-text-primary placeholder-text-secondary focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200"
                            placeholder="John"
                        >
                    </div>
                    <div>
                        <label for="lastName" class="block text-sm font-medium text-text-primary mb-2">Last Name</label>
                        <input 
                            type="text" 
                            id="lastName" 
                            name="lastName"
                            required
                            class="w-full px-4 py-3 bg-surface-dark border border-border-dark rounded-xl text-text-primary placeholder-text-secondary focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200"
                            placeholder="Doe"
                        >
                    </div>
                </div>

                <!-- Email -->
                <div>
                    <label for="email" class="block text-sm font-medium text-text-primary mb-2">Email Address</label>
                    <input 
                        type="email" 
                        id="email" 
                        name="email"
                        required
                        class="w-full px-4 py-3 bg-surface-dark border border-border-dark rounded-xl text-text-primary placeholder-text-secondary focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200"
                        placeholder="john@example.com"
                    >
                </div>

                <!-- Password -->
                <div>
                    <label for="password" class="block text-sm font-medium text-text-primary mb-2">Password</label>
                    <input 
                        type="password" 
                        id="password" 
                        name="password"
                        required
                        minlength="6"
                        class="w-full px-4 py-3 bg-surface-dark border border-border-dark rounded-xl text-text-primary placeholder-text-secondary focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200"
                        placeholder="••••••••"
                    >
                </div>

                <!-- Confirm Password -->
                <div>
                    <label for="confirmPassword" class="block text-sm font-medium text-text-primary mb-2">Confirm Password</label>
                    <input 
                        type="password" 
                        id="confirmPassword" 
                        name="confirmPassword"
                        required
                        class="w-full px-4 py-3 bg-surface-dark border border-border-dark rounded-xl text-text-primary placeholder-text-secondary focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200"
                        placeholder="••••••••"
                    >
                </div>

                <!-- Terms and Conditions -->
                <div class="flex items-start space-x-3">
                    <input 
                        type="checkbox" 
                        id="terms" 
                        name="terms"
                        required
                        class="mt-1 w-4 h-4 text-primary bg-surface-dark border-border-dark rounded focus:ring-primary/50 focus:ring-2"
                    >
                    <label for="terms" class="text-sm text-text-secondary">
                        I agree to the <a href="#" class="text-primary hover:text-primary/80 transition-colors">Terms of Service</a> and <a href="#" class="text-primary hover:text-primary/80 transition-colors">Privacy Policy</a>
                    </label>
                </div>

                <!-- Error Message -->
                <div id="errorMessage" class="hidden p-4 bg-error/10 border border-error/20 rounded-xl">
                    <p id="errorText" class="text-sm text-error"></p>
                </div>

                <!-- Success Message -->
                <div id="successMessage" class="hidden p-4 bg-success/10 border border-success/20 rounded-xl">
                    <p id="successText" class="text-sm text-success"></p>
                </div>

                <!-- Submit Button -->
                <button 
                    type="submit" 
                    class="w-full bg-gradient-to-r from-primary to-secondary text-black font-semibold py-3 px-6 rounded-xl hover:from-primary/90 hover:to-secondary/90 transform hover:scale-[1.02] transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-primary/50"
                >
                    Create Account
                </button>
            </form>

            <!-- Login Link -->
            <div class="mt-6 text-center">
                <p class="text-text-secondary">
                    Already have an account? 
                    <a href="login.html" class="text-primary hover:text-primary/80 font-medium transition-colors">Sign in</a>
                </p>
            </div>
        </div>

        <!-- Features Preview -->
        <div class="mt-8 grid grid-cols-3 gap-4 text-center">
            <div class="glass-effect rounded-xl p-4">
                <div class="w-8 h-8 bg-primary/20 rounded-lg flex items-center justify-center mx-auto mb-2">
                    <svg class="w-4 h-4 text-primary" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                    </svg>
                </div>
                <p class="text-xs text-text-secondary">Analytics</p>
            </div>
            <div class="glass-effect rounded-xl p-4">
                <div class="w-8 h-8 bg-secondary/20 rounded-lg flex items-center justify-center mx-auto mb-2">
                    <svg class="w-4 h-4 text-secondary" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                    </svg>
                </div>
                <p class="text-xs text-text-secondary">Trading</p>
            </div>
            <div class="glass-effect rounded-xl p-4">
                <div class="w-8 h-8 bg-primary/20 rounded-lg flex items-center justify-center mx-auto mb-2">
                    <svg class="w-4 h-4 text-primary" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/>
                    </svg>
                </div>
                <p class="text-xs text-text-secondary">Performance</p>
            </div>
        </div>
    </div>

    <!-- Supabase Client -->
    <script src="https://unpkg.com/@supabase/supabase-js@2/dist/module/index.js" type="module"></script>
    <script type="module">
        // Initialize Supabase
        let supabase;
        
        async function initSupabase() {
            try {
                const { createClient } = await import('https://unpkg.com/@supabase/supabase-js@2/dist/module/index.js');
                supabase = createClient(
                    'https://zbjzikbyueozzyhihnmy.supabase.co',
                    'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inpianppa2J5dWVvenp5aGlobm15Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg0ODA2MTcsImV4cCI6MjA3NDA1NjYxN30.nlqrga4Lv23kc_FZoTr60JXXf6Q_GveWhRrYcYsxGto'
                );
                console.log('Supabase initialized successfully:', supabase);
                return true;
            } catch (error) {
                console.error('Failed to initialize Supabase:', error);
                return false;
            }
        }

        // Initialize Supabase immediately
        const initPromise = initSupabase();
        
        // Make supabase available globally
        window.supabaseReady = initPromise;
        window.getSupabase = () => supabase;

        document.addEventListener('DOMContentLoaded', async function() {
            // Wait for Supabase to be ready
            const isReady = await window.supabaseReady;
            if (!isReady) {
                console.error('Supabase failed to initialize');
                return;
            }
            console.log('Supabase ready for use:', supabase);
            
            const form = document.getElementById('registerForm');
            const errorMessage = document.getElementById('errorMessage');
            const successMessage = document.getElementById('successMessage');
            const errorText = document.getElementById('errorText');
            const successText = document.getElementById('successText');

            form.addEventListener('submit', async function(e) {
                e.preventDefault();
                console.log('🔍 Registration form submitted!');
                
                // Hide previous messages
                errorMessage.classList.add('hidden');
                successMessage.classList.add('hidden');

                // Get form data
                const formData = new FormData(form);
                const firstName = formData.get('firstName');
                const lastName = formData.get('lastName');
                const email = formData.get('email');
                const password = formData.get('password');
                const confirmPassword = formData.get('confirmPassword');
                const terms = formData.get('terms');

                console.log('📝 Form data:', { firstName, lastName, email, passwordLength: password.length, confirmPasswordLength: confirmPassword.length, terms });

                // Validation
                if (password !== confirmPassword) {
                    console.log('❌ Password mismatch');
                    showError('Passwords do not match');
                    return;
                }

                if (password.length < 6) {
                    console.log('❌ Password too short');
                    showError('Password must be at least 6 characters long');
                    return;
                }

                if (!terms) {
                    console.log('❌ Terms not accepted');
                    showError('Please accept the terms and conditions');
                    return;
                }

                console.log('✅ Validation passed, proceeding with registration...');

                try {
                    // Get Supabase instance
                    const supabaseClient = window.getSupabase();
                    if (!supabaseClient) {
                        console.log('❌ Supabase not initialized');
                        throw new Error('Supabase not initialized. Please refresh the page and try again.');
                    }

                    console.log('✅ Supabase client ready:', supabaseClient);

                    // Show loading state
                    const submitBtn = form.querySelector('button[type="submit"]');
                    const originalText = submitBtn.textContent;
                    submitBtn.textContent = 'Creating Account...';
                    submitBtn.disabled = true;

                    console.log('🚀 Attempting Supabase registration...');
                    // Register user with Supabase
                    const { data, error } = await supabaseClient.auth.signUp({
                        email: email,
                        password: password,
                        options: {
                            data: {
                                first_name: firstName,
                                last_name: lastName
                            }
                        }
                    });

                    console.log('📊 Supabase response:', { data, error });

                    if (error) {
                        throw new Error(error.message);
                    }

                    showSuccess('Account created successfully! Please check your email for verification.');
                    form.reset();

                } catch (error) {
                    console.error('Registration error:', error);
                    showError(error.message || 'Registration failed. Please try again.');
                } finally {
                    // Reset button
                    const submitBtn = form.querySelector('button[type="submit"]');
                    submitBtn.textContent = 'Create Account';
                    submitBtn.disabled = false;
                }
            });

            function showError(message) {
                errorText.textContent = message;
                errorMessage.classList.remove('hidden');
            }

            function showSuccess(message) {
                successText.textContent = message;
                successMessage.classList.remove('hidden');
            }
        });
    </script>
</body>
</html>
