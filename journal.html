<!DOCTYPE html>
<html class="dark" lang="en"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>ZenTrade - Trade Journal</title>
<link crossorigin="" href="https://fonts.gstatic.com/" rel="preconnect"/>
<link as="style" href="https://fonts.googleapis.com/css2?display=swap&amp;family=Space+Grotesk:wght@400;500;700" onload="this.rel='stylesheet'" rel="stylesheet"/>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              primary: "#00F5D4",
              secondary: "#7B2CBF",
              "background-light": "#f6f7f8",
              "background-dark": "#0D1B2A",
              "card-dark": "#1B1B1B",
              "text-primary": "#E0E0E0",
              "text-secondary": "#6C757D",
              "profit-green": "#00C853",
              "loss-red": "#FF1744",
              "warning-amber": "#FFD600",
            },
            fontFamily: {
              display: ["Space Grotesk"],
            },
            borderRadius: { DEFAULT: "0.5rem", lg: "1rem", xl: "1.5rem", full: "9999px" },
            boxShadow: {
              'glow-primary-md': '0 0 15px 0 rgba(0, 245, 212, 0.3)',
              'glow-primary-lg': '0 0 25px 0 rgba(0, 245, 212, 0.4)',
              'glow-secondary-md': '0 0 15px 0 rgba(123, 44, 191, 0.3)',
              'glow-secondary-lg': '0 0 25px 0 rgba(123, 44, 191, 0.4)',
            }
          },
        },
      };
    </script>
<style>
      .glowing-shadow {
        box-shadow: 0 0 15px 0 rgba(0, 245, 212, 0.3);
      }
    </style>
</head>
<body class="bg-background-light dark:bg-background-dark font-display text-text-primary">
<div class="flex h-auto min-h-screen w-full flex-col overflow-x-hidden">
<div class="flex h-full grow flex-col">
            <header class="flex items-center justify-between whitespace-nowrap border-b border-primary/20 px-6 sm:px-10 py-4">
<div class="flex items-center gap-4">
                <div class="size-16 relative cursor-pointer transition-transform duration-200 hover:scale-105" onclick="window.location.href="dashboard.html"">
                    <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" class="w-full h-full">
                        <defs>
                            <linearGradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#00F5D4;stop-opacity:1" />
                                <stop offset="50%" style="stop-color:#00D4FF;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#7B2CBF;stop-opacity:1" />
                            </linearGradient>
                            <linearGradient id="pulseGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#00F5D4;stop-opacity:0.8" />
                                <stop offset="50%" style="stop-color:#00D4FF;stop-opacity:0.6" />
                                <stop offset="100%" style="stop-color:#7B2CBF;stop-opacity:0.8" />
                            </linearGradient>
                            <filter id="glow">
                                <feGaussianBlur stdDeviation="4" result="coloredBlur"/>
                                <feMerge> 
                                    <feMergeNode in="coloredBlur"/>
                                    <feMergeNode in="SourceGraphic"/>
                                </feMerge>
                            </filter>
                        </defs>
                        
                        <!-- Animated inner ring -->
                        <circle cx="50" cy="50" r="40" 
                                stroke="url(#pulseGradient)" 
                                stroke-width="3" 
                                fill="none" 
                                opacity="0.7">
                            <animateTransform attributeName="transform" 
                                            type="rotate" 
                                            values="360 50 50;0 50 50" 
                                            dur="6s" 
                                            repeatCount="indefinite"/>
                        </circle>
                        
                        <!-- Central hexagon -->
                        <polygon points="50,25 70,40 70,60 50,75 30,60 30,40" 
                                 stroke="url(#logoGradient)" 
                                 stroke-width="4" 
                                 fill="none" 
                                 filter="url(#glow)">
                            <animate attributeName="opacity" 
                                     values="0.7;1;0.7" 
                                     dur="2s" 
                                     repeatCount="indefinite"/>
                        </polygon>
                        
                        <!-- Animated data points -->
                        <circle cx="25" cy="45" r="4" fill="#00F5D4" opacity="0.9">
                            <animate attributeName="r" values="3;6;3" dur="1.5s" repeatCount="indefinite"/>
                            <animate attributeName="opacity" values="0.6;1;0.6" dur="1.5s" repeatCount="indefinite"/>
                        </circle>
                        <circle cx="50" cy="30" r="4" fill="#00D4FF" opacity="0.9">
                            <animate attributeName="r" values="3;6;3" dur="1.8s" repeatCount="indefinite" begin="0.3s"/>
                            <animate attributeName="opacity" values="0.6;1;0.6" dur="1.8s" repeatCount="indefinite" begin="0.3s"/>
                        </circle>
                        <circle cx="75" cy="45" r="4" fill="#7B2CBF" opacity="0.9">
                            <animate attributeName="r" values="3;6;3" dur="2s" repeatCount="indefinite" begin="0.6s"/>
                            <animate attributeName="opacity" values="0.6;1;0.6" dur="2s" repeatCount="indefinite" begin="0.6s"/>
                        </circle>
                        
                        <!-- Animated connection lines -->
                        <path d="M25,45 L50,30 L75,45" 
                              stroke="url(#logoGradient)" 
                              stroke-width="2.5" 
                              fill="none" 
                              opacity="0.7">
                            <animate attributeName="opacity" values="0.4;0.9;0.4" dur="3s" repeatCount="indefinite"/>
                        </path>
                    </svg>
                </div>
</div>
            <nav class="hidden lg:flex items-center gap-8">
                <a class="text-sm font-medium text-black/80 dark:text-white/80 hover:text-black dark:hover:text-white transition-colors" href="dashboard.html">Dashboard</a>
                <a class="text-sm font-medium text-primary font-semibold" href="journal.html">Journal</a>
                <a class="text-sm font-medium text-black/80 dark:text-white/80 hover:text-black dark:hover:text-white transition-colors" href="strategies.html">Strategies</a>
</nav>
<div class="flex items-center gap-4">
                <div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuA0ccUh1yXibZLVrnoSjDwKu2IvT9kLpEV84gqqFchlS45gnCfslzyzvaGz6eEeT4TnKLvyNKaEn3Xq7uxgBYBhpVnGaCJiYOwzk1vtKC88aX-T94FUU71dVaKR-hxMTXkDcfCc34SAQm4GdfPTq9PxNRSNo-jtZvIPkocGjf9jwfKFHad5V0_fZJUjtqR8i-JY2m8J3D0FsaNFcjH55RNWJgVz9vbHwxP7dAeSXYFHdoqn4AePf8JlgU3HzCbFBQqZqdLweo9gN2M");'></div>
</div>
</header>
            <main class="flex-1 p-4 sm:p-6 lg:p-8">
                <div class="mx-auto max-w-7xl">
<div class="mb-8 flex items-center justify-between">
<div>
<div class="flex items-center gap-4 mb-2">
    <div class="w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center">
        <svg class="w-7 h-7 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
        </svg>
    </div>
    <h1 class="text-3xl font-bold tracking-tight text-text-primary">Trade Journal</h1>
</div>
<p class="mt-2 text-base text-text-secondary">Review your past trades and analyze your performance.</p>
</div>
<div class="flex items-center gap-3">
<a href="new-trade.html" class="inline-flex items-center justify-center rounded-full bg-primary px-8 py-4 text-base font-bold text-text-primary shadow-lg transition-all duration-300 ease-in-out hover:scale-105">
<svg class="mr-3" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
<circle cx="10" cy="10" r="9" stroke="white" stroke-width="2" fill="none"/>
<path d="M10 6V14M6 10H14" stroke="white" stroke-width="2" stroke-linecap="round"/>
</svg>
Add Trade
</a>
    </div>
    </div>
    
    <!-- Statistics Section -->
    <div class="mb-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
        <div class="bg-card-dark/50 p-6 rounded-xl shadow-glow-primary-md border border-primary/20">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-sm font-medium text-text-secondary mb-1">Avg Winning Trade</p>
                    <p class="text-xl font-bold text-profit-green" id="avg-winning-trade">$0.00</p>
                </div>
                <div class="w-12 h-12 rounded-full bg-profit-green/20 flex items-center justify-center">
                    <svg class="w-6 h-6 text-profit-green" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                    </svg>
                </div>
            </div>
        </div>
        
        <div class="bg-card-dark/50 p-6 rounded-xl shadow-glow-primary-md border border-primary/20">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-sm font-medium text-text-secondary mb-1">Avg Losing Trade</p>
                    <p class="text-xl font-bold text-loss-red" id="avg-losing-trade">$0.00</p>
                </div>
                <div class="w-12 h-12 rounded-full bg-loss-red/20 flex items-center justify-center">
                    <svg class="w-6 h-6 text-loss-red" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path>
                    </svg>
                </div>
            </div>
        </div>
        
        <div class="bg-card-dark/50 p-6 rounded-xl shadow-glow-primary-md border border-primary/20">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-sm font-medium text-text-secondary mb-1">Best Trade</p>
                    <p class="text-xl font-bold text-profit-green" id="best-trade">$0.00</p>
                </div>
                <div class="w-12 h-12 rounded-full bg-profit-green/20 flex items-center justify-center">
                    <svg class="w-6 h-6 text-profit-green" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
                    </svg>
                </div>
            </div>
        </div>
        
        <div class="bg-card-dark/50 p-6 rounded-xl shadow-glow-primary-md border border-primary/20">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-sm font-medium text-text-secondary mb-1">Worst Trade</p>
                    <p class="text-xl font-bold text-loss-red" id="worst-trade">$0.00</p>
                </div>
                <div class="w-12 h-12 rounded-full bg-loss-red/20 flex items-center justify-center">
                    <svg class="w-6 h-6 text-loss-red" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"></path>
                    </svg>
                </div>
            </div>
        </div>
    </div>
    
    <div class="mb-6 flex flex-col sm:flex-row gap-4">
<div class="relative flex-grow">
<div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3">
<svg class="size-5 text-text-primary/40" fill="currentColor" height="24px" viewBox="0 0 256 256" width="24px" xmlns="http://www.w3.org/2000/svg">
<path d="M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"></path>
</svg>
</div>
<input class="w-full rounded-lg border border-white/10 bg-white/5 py-2.5 pl-10 pr-4 text-text-primary placeholder:text-text-primary/40 focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary transition-all" placeholder="Search trades..." type="text"/>
</div>
<!-- Filter buttons removed for cleaner card layout -->
</div>
<!-- Trades Cards Container -->
<div id="trades-cards-container" class="space-y-4">
<!-- Trade cards will be loaded here -->
</div>
<div id="empty-state" class="hidden text-center py-12">
<div class="mx-auto w-24 h-24 rounded-full bg-primary/10 flex items-center justify-center mb-4">
<svg class="text-4xl text-primary" fill="currentColor" height="24px" viewBox="0 0 256 256" width="24px" xmlns="http://www.w3.org/2000/svg">
<path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm48-88a8,8,0,0,1-8,8H136v32a8,8,0,0,1-16,0V136H88a8,8,0,0,1,0-16h32V88a8,8,0,0,1,16,0v32h32A8,8,0,0,1,176,128Z"></path>
</svg>
</div>
<h3 class="text-lg font-semibold text-text-primary mb-2">No trades yet</h3>
<p class="text-text-secondary mb-6">Start logging your trades to see them here</p>
<a href="new-trade.html" class="inline-flex items-center justify-center rounded-lg bg-primary px-6 py-3 text-sm font-bold text-text-primary shadow-lg transition-all duration-300 ease-in-out hover:scale-105">
<svg class="mr-2" fill="currentColor" height="20px" viewBox="0 0 256 256" width="20px" xmlns="http://www.w3.org/2000/svg">
<path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm48-88a8,8,0,0,1-8,8H136v32a8,8,0,0,1-16,0V136H88a8,8,0,0,1,0-16h32V88a8,8,0,0,1,16,0v32h32A8,8,0,0,1,176,128Z"></path>
</svg>
Add First Trade
</a>
</div>
</div>
</main>
<footer class="flex justify-center py-6">
<p class="text-sm text-text-primary/40">© 2024 ZenTrade. All rights reserved.</p>
</footer>
</div>
</div>

<script>
        function loadTrades() {
            console.log('Loading trades...');
            const trades = JSON.parse(localStorage.getItem('trades') || '[]');
            console.log('Found trades:', trades);
            console.log('Number of trades:', trades.length);
            
            // Debug: Log each trade structure
            trades.forEach((trade, index) => {
                console.log(`Trade ${index + 1}:`, {
                    id: trade.id,
                    timestamp: trade.timestamp,
                    date: trade.date,
                    instrument: trade.instrument,
                    side: trade.side,
                    netPnl: trade.netPnl,
                    pnl: trade.pnl,
                    emotion: trade.emotion,
                    feeling: trade.feeling
                });
            });
            
            const cardsContainer = document.getElementById('trades-cards-container');
            const emptyState = document.getElementById('empty-state');
            
            // Debug: Check if elements exist
            console.log('Cards container element:', cardsContainer);
            console.log('Empty state element:', emptyState);

            if (trades.length === 0) {
                console.log('No trades found, showing empty state');
                cardsContainer.classList.add('hidden');
                emptyState.classList.remove('hidden');
                return;
            }

            console.log('Displaying', trades.length, 'trades');
            cardsContainer.classList.remove('hidden');
            emptyState.classList.add('hidden');

            // Sort trades by date (newest first)
            trades.sort((a, b) => new Date(b.timestamp || b.date) - new Date(a.timestamp || a.date));

            cardsContainer.innerHTML = trades.map(trade => {
                const date = new Date(trade.timestamp || trade.date).toLocaleDateString();
                const pnl = trade.netPnl || trade.pnl || 0;
                const pnlColor = pnl >= 0 ? 'text-profit-green' : 'text-loss-red';
                const pnlSign = pnl >= 0 ? '+' : '';
                const direction = trade.side || 'N/A';
                const emotion = trade.emotion || (trade.emotions && trade.emotions[0]) || trade.feeling || 'Neutral';
                
                // Emotion color mapping to match the image
                let emotionColor = 'bg-white/10 text-text-secondary';
                if (emotion.toLowerCase().includes('confident') || emotion.toLowerCase().includes('excited')) {
                    emotionColor = 'bg-primary/10 text-primary';
                } else if (emotion.toLowerCase().includes('anxious') || emotion.toLowerCase().includes('worried')) {
                    emotionColor = 'bg-yellow-400/10 text-yellow-400';
                } else if (emotion.toLowerCase().includes('frustrated') || emotion.toLowerCase().includes('angry')) {
                    emotionColor = 'bg-red-400/10 text-red-400';
                }

                return `
                    <div class="bg-card-dark/50 border border-primary/20 rounded-lg p-4 hover:bg-primary/10 transition-all duration-300">
                        <div class="grid grid-cols-6 gap-4 items-center">
                            <div class="text-center">
                                <div class="text-xs uppercase tracking-wider text-text-secondary mb-1">DATE</div>
                                <div class="text-sm font-bold text-text-primary">${date}</div>
                            </div>
                            <div class="text-center">
                                <div class="text-xs uppercase tracking-wider text-text-secondary mb-1">INSTRUMENT</div>
                                <div class="text-sm font-bold text-text-primary">${trade.instrument || 'N/A'}</div>
                            </div>
                            <div class="text-center">
                                <div class="text-xs uppercase tracking-wider text-text-secondary mb-1">DIRECTION</div>
                                <div class="text-sm font-bold text-text-primary">${direction}</div>
                            </div>
                            <div class="text-center">
                                <div class="text-xs uppercase tracking-wider text-text-secondary mb-1">P&L</div>
                                <div class="text-sm font-bold ${pnlColor}">${pnlSign}$${Math.abs(pnl).toFixed(2)}</div>
                            </div>
                            <div class="text-center">
                                <div class="text-xs uppercase tracking-wider text-text-secondary mb-1">EMOTION</div>
                                <div class="flex justify-center">
                                    <span class="inline-flex items-center rounded-full px-3 py-1 text-xs font-medium ${emotionColor}">${emotion}</span>
                                </div>
                            </div>
                            <div class="text-center">
                                <div class="flex justify-center gap-3">
                                    <a href="trade-details.html?id=${trade.id}" class="text-primary hover:text-primary/80 transition-colors text-sm font-medium">
                                        Details
                                    </a>
                                    <button onclick="deleteTrade('${trade.id}')" class="text-red-400 hover:text-red-300 transition-colors text-sm font-medium">
                                        Delete
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
            
            // Update statistics after loading trades
            updateStatistics();
        }

        function deleteTrade(tradeId) {
            if (confirm('Are you sure you want to delete this trade?')) {
                const trades = JSON.parse(localStorage.getItem('trades') || '[]');
                const updatedTrades = trades.filter(trade => trade.id !== tradeId);
                localStorage.setItem('trades', JSON.stringify(updatedTrades));
                
                console.log('Trade deleted:', tradeId);
                console.log('Remaining trades:', updatedTrades);
                
                // Reload the trades display
                loadTrades();
                
                // Update statistics
                updateStatistics();
                
                // Show success message
                alert('Trade deleted successfully!');
            }
        }

        function clearAllTrades() {
            const trades = JSON.parse(localStorage.getItem('trades') || '[]');
            
            if (trades.length === 0) {
                alert('No trades to delete!');
                return;
            }
            
            if (confirm(`Are you sure you want to delete ALL ${trades.length} trades? This action cannot be undone!`)) {
                // Clear all trades from localStorage
                localStorage.setItem('trades', JSON.stringify([]));
                
                console.log('All trades cleared');
                
                // Reload the trades display
                loadTrades();
                
                // Update statistics
                updateStatistics();
                
                // Show success message
                alert(`All ${trades.length} trades have been deleted successfully!`);
            }
        }


        // Set dark mode as default
        document.documentElement.classList.add('dark');

        // Debug function to check localStorage
        function debugLocalStorage() {
            console.log('=== DEBUG: localStorage contents ===');
            console.log('All localStorage keys:', Object.keys(localStorage));
            console.log('trades key:', localStorage.getItem('trades'));
            console.log('Parsed trades:', JSON.parse(localStorage.getItem('trades') || '[]'));
            console.log('=====================================');
        }
        
// Make functions globally available
window.debugLocalStorage = debugLocalStorage;
window.loadTrades = loadTrades;
window.clearAllTrades = clearAllTrades;

// Test functions removed - functionality is working

// Debug function to check localStorage
window.debugTrades = function() {
    const trades = JSON.parse(localStorage.getItem('trades') || '[]');
    console.log('Current trades in localStorage:', trades);
    console.log('Number of trades:', trades.length);
    return trades;
};

// Sample trades function removed

        // Calculate and update trade statistics
        function updateStatistics() {
            const trades = JSON.parse(localStorage.getItem('trades') || '[]');
            
            if (trades.length === 0) {
                document.getElementById('avg-winning-trade').textContent = '$0.00';
                document.getElementById('avg-losing-trade').textContent = '$0.00';
                document.getElementById('best-trade').textContent = '$0.00';
                document.getElementById('worst-trade').textContent = '$0.00';
                return;
            }
            
            // Get P&L values from trades
            const pnlValues = trades.map(trade => {
                const pnl = trade.netPnl || trade.pnl || 0;
                return parseFloat(pnl) || 0;
            });
            
            // Separate winning and losing trades
            const winningTrades = pnlValues.filter(pnl => pnl > 0);
            const losingTrades = pnlValues.filter(pnl => pnl < 0);
            
            // Calculate averages
            const avgWinning = winningTrades.length > 0 
                ? winningTrades.reduce((sum, pnl) => sum + pnl, 0) / winningTrades.length 
                : 0;
            
            const avgLosing = losingTrades.length > 0 
                ? losingTrades.reduce((sum, pnl) => sum + pnl, 0) / losingTrades.length 
                : 0;
            
            // Find best and worst trades
            const bestTrade = Math.max(...pnlValues);
            const worstTrade = Math.min(...pnlValues);
            
            // Update the UI
            document.getElementById('avg-winning-trade').textContent = `$${avgWinning.toFixed(2)}`;
            document.getElementById('avg-losing-trade').textContent = `$${avgLosing.toFixed(2)}`;
            document.getElementById('best-trade').textContent = `$${bestTrade.toFixed(2)}`;
            document.getElementById('worst-trade').textContent = `$${worstTrade.toFixed(2)}`;
            
            console.log('Statistics updated:', {
                totalTrades: trades.length,
                winningTrades: winningTrades.length,
                losingTrades: losingTrades.length,
                avgWinning: avgWinning.toFixed(2),
                avgLosing: avgLosing.toFixed(2),
                bestTrade: bestTrade.toFixed(2),
                worstTrade: worstTrade.toFixed(2)
            });
        }

        // Load trades on page load
        loadTrades();
        
        // Clear any existing sample trades
        const existingTrades = JSON.parse(localStorage.getItem('trades') || '[]');
        const sampleTradeIds = ['1', '2', '3', '4', '5'];
        const filteredTrades = existingTrades.filter(trade => !sampleTradeIds.includes(trade.id));
        if (filteredTrades.length !== existingTrades.length) {
            localStorage.setItem('trades', JSON.stringify(filteredTrades));
            console.log('Sample trades removed from localStorage');
            loadTrades(); // Reload to show updated list
        }

        // Listen for storage changes to refresh trades
        window.addEventListener('storage', function(e) {
            if (e.key === 'trades') {
                console.log('Trades updated, reloading...');
                loadTrades();
            }
        });

        // Also listen for focus events to catch changes when returning to this page
        window.addEventListener('focus', function() {
            console.log('Page focused, reloading trades...');
            loadTrades();
        });

        // Also listen for visibility change
        document.addEventListener('visibilitychange', function() {
            if (!document.hidden) {
                console.log('Page became visible, reloading trades...');
                loadTrades();
            }
        });
    </script>
</body></html>